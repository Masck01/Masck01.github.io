{"version":3,"sources":["./src/content.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAA2C;AACN;AAErC,MAAM,OAAO;IAOX;QANA,gCAAgC;QAChC,aAAQ,GAAG,kDAAK,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QAM5B,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE;YACrE,IAAI,OAAO,CAAC,KAAK,KAAK,YAAY,EAAE;gBAClC,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBACzB,iBAAiB;gBACjB,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,CACpD,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CACtB,CAAC;gBACF,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;gBACrC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;aACtB;YACD,IAAI,OAAO,CAAC,IAAI,KAAK,YAAY,EAAE;gBACjC,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,gBAAgB;gBAChB,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;gBAClE,4BAA4B;gBAC5B,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,EAAE,GAAG,EAAE,CAC3C,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAChC,CAAC;gBACF,YAAY,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBACpC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;aACtB;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,0BAA0B;IAC1B,QAAQ;QACN,OAAO,QAAQ,CAAC,aAAa,CAC3B,+CAA+C,CAChD,CAAC;IACJ,CAAC;IACD,gBAAgB;IAChB,WAAW;QACT,OAAO,QAAQ,CAAC,aAAa,CAC3B,0CAA0C,CACtB,CAAC;IACzB,CAAC;IACD,iCAAiC;IACjC,iBAAiB;QACf,OAAO,CAAC,GAAG,CAAC,4CAA4C,CAAC,CAAC;QAC1D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ;aACtB,IAAI,CACH,0DAAG,CAAC,CAAC,GAAG,EAAE,EAAE;YACV,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,GAAG,CAAC,CAAC;QACtC,CAAC,CAAC,CACH;aACA,SAAS,CAAC;YACT,IAAI,EAAE,GAAG,EAAE;gBACT,IAAI,IAAI,CAAC,WAAW,EAAE,KAAK,IAAI,EAAE;oBAC/B,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;oBACjC,IAAI,CAAC,WAAW,EAAE,CAAC,KAAK,EAAE,CAAC;iBAC5B;qBAAM;oBACL,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;iBACrC;YACH,CAAC;YACD,KAAK,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK;SAC3B,CAAC,CAAC;IACP,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QACxB,OAAO,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;IAChD,CAAC;CACF;AAED,MAAM,UAAU,GAAG,IAAI,OAAO,EAAE,CAAC","file":"content.js","sourcesContent":["import { timer, Subscription } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\n\r\nclass Content {\r\n  // Stream that emits every 30sec\r\n  overtime = timer(5000, 30000);\r\n\r\n  // Intermediate Subscription\r\n  sub$: Subscription;\r\n\r\n  constructor() {\r\n    chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\r\n      if (message.start === 'initAction') {\r\n        this.startSearchPuntos();\r\n        // Chrome Storage\r\n        chrome.storage.local.set({ twpoints: 'active' }, () =>\r\n          console.log('stored')\r\n        );\r\n        sendResponse(this.startSearchPuntos);\r\n        console.log(message);\r\n      }\r\n      if (message.stop === 'stopAction') {\r\n        this.stopSearchPuntos();\r\n        // Before remove\r\n        chrome.storage.local.get('twpoints', (keys) => console.log(keys));\r\n        // Chrome remove key twpoint\r\n        chrome.storage.local.remove('twpoints', () =>\r\n          console.log('removed twpoints')\r\n        );\r\n        sendResponse(this.stopSearchPuntos);\r\n        console.log(message);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Searcher for Box puntos\r\n  buscador() {\r\n    return document.querySelector(\r\n      '[data-test-selector=community-points-summary]'\r\n    );\r\n  }\r\n  // Button puntos\r\n  buscadorBtn() {\r\n    return document.querySelector(\r\n      'button.tw-button--success.tw-interactive'\r\n    ) as HTMLButtonElement;\r\n  }\r\n  // Start search for puntos button\r\n  startSearchPuntos() {\r\n    console.log('iniciando la deteccion del boton de puntos');\r\n    this.sub$ = this.overtime\r\n      .pipe(\r\n        tap((val) => {\r\n          console.log('value desde tab', val);\r\n        })\r\n      )\r\n      .subscribe({\r\n        next: () => {\r\n          if (this.buscadorBtn() !== null) {\r\n            console.log('button encontrado');\r\n            this.buscadorBtn().click();\r\n          } else {\r\n            console.log('button no encontrado');\r\n          }\r\n        },\r\n        error: () => console.error,\r\n      });\r\n  }\r\n\r\n  stopSearchPuntos() {\r\n    this.sub$.unsubscribe();\r\n    console.log('terminando deteccion de puntos');\r\n  }\r\n}\r\n\r\nconst appContent = new Content();\r\n"],"sourceRoot":"webpack:///"}